<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <link rel="stylesheet" type="text/css" href="gcbm.css"/>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>The DaCapo Benchmark Suite</title>
</head>

<body>
<h2>Running benchmarks</h2>
To run one of the benchmarks, use the command
<pre>java -jar dacapo-beta&lt;date&gt;.jar [-s small|default|large] [-c &lt;callbackclass&gt;] [-F] [-h] [-i] [-v] &lt;bm&gt; [&lt;bm2&gt;, ...]</pre>
<pre><br>where:</pre>
<table cellpadding="2" cellspacing="2" border="1" style="text-align: left; width: 100%;">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <pre>-s</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>specifies the workload size (small, default, large)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>-c</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>specifies the name of a callback class which extends dacapo.Callback, allowing hooks for benchmark start, end, warmup start, and warm up end</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>-h</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>prints a usage message</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>-F</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>Forces test input from the filesystem rather than the jar file</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>-i</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>print information on the benchmark(s), including brief description, urls, copyright and version</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>-v</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>verbose output (probably only of interest to maintainers)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre>&lt;bm&gt;</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>a list of benchmarks to execute {antlr, batik, bloat, chart, fop, hsqldb, jython, pmd, ps, xalan}</pre>
      </td>
    </tr>
  </tbody>
</table>
<pre><br></pre>
Several of the benchmarks create output files, which they do by
creating a new subdirectory in the current working directory called
'scratch'.  The jython benchmark creates a subdirectory called 'cachedir'.
It is therefore necessary to run the benchmarks in a directory that is
writeable by the current user.

<h3>Callbacks</h3>
The harness allows for pluggable callbacks which are executed before and after
benchmark execution.  These allow (for example) JVM-specific statistics collection
to be started and stopped.
<a href="gcbm/MyCallback.java">Here</a>
is an example benchmark callback
class (use<span style="font-family: monospace;"> "-c MyCallback"</span>
on the commandline).  The distributed jar file contains one pre-built
callback
<ul>
<li><bf>MMTkCallback</bf>.  Brackets the timing run with calls to MMTk's
  benchmark harness.</li>
</ul><br>
</body></html>
