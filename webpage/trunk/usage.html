<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <link rel="stylesheet" type="text/css" href="dacapo.css"/>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>The DaCapo Benchmark Suite</title>
<style>
TABLE.options { border-collapse: collapse; }
TD {
  vertical-align: top;
  padding-right: 12px;
}
TD.flag { 
  font-weight: bold; 
  font-family: monospace;
}
TD.desc { 
  font-family: arial, sans-serif;
  font-size: smaller;
}
TD.section {
  font-weight: bold; 
  padding-top: 18px;
}
</style>
</head>

<body>
<h1>Usage</h1>
Our suite will evolve to maintain its relevance. It is therefore
<span style="color: rgb(204, 0, 0); font-style: italic;"> essential that
the version number associated with the release be cited in any use of
the benchmark,</span> and we ask that you please cite the 2006 OOPSLA paper describing the suite:
<ul>
<font size=-2>
Blackburn, S. M., Garner, R., Hoffman, C., Khan, A. M., McKinley, K. S., Bentzur, R., Diwan, A., Feinberg, D., Frampton, D., Guyer, S. Z., Hirzel, M., Hosking, A., Jump, M., Lee, H., Moss, J. E. B., Phansalkar, A., Stefanovic, D., VanDrunen, T., von Dincklage, D., and Wiedermann, B. <b>The DaCapo Benchmarks: Java Benchmarking Development and Analysis</b>, <i>OOPSLA '06: Proceedings of the 21st annual ACM SIGPLAN conference on Object-Oriented Programing, Systems, Languages, and Applications</i>, (Portland, OR, USA, October 22-26, 2006) (<a href="download/dacapo-oopsla-2006.pdf">pdf</a>, <a href="cite.html">BibTeX</a>).
</font>
</ul>
<h2>Running benchmarks</h2>
To run one of the benchmarks, use the command:<p>
<span style="font-family: monospace;">
java -jar dacapo-2006-10.jar [-s small|default|large] [-c &lt;callbackclass&gt;] [-<flags>] &lt;bm&gt; [&lt;bm2&gt;, ...]
</span>
<p>
<table class="options">
  <tbody>
    <tr><td class="section" colspan=2>Standard options</td></tr>
    <tr>
      <td class="flag"> -s&nbsp;<i>size</i></td>
      <td class="desc"> specifies the workload size (small, default, large) </td>
    </tr>
    <tr>
      <td class="flag">-c&nbsp;<i>class</i></td>
      <td class="desc">
      specifies the name of a callback class which extends dacapo.Callback, 
allowing hooks for benchmark start, end, warmup start, and warm up end
      </td>
    </tr>
    <tr>
      <td class="flag"><i>bm</i></td>
      <td class="desc">
      a list of benchmarks to execute {antlr, bloat, chart, eclipse, fop, hsqldb, jython, 
lusearch, luindex, pmd, xalan}
      </td>
    </tr>
    <tr>
      <td class="flag">-h</td>
      <td class="desc"> prints a usage message </td>
    </tr>

    <tr>
      <td class="flag">-i</td>
      <td class="desc">
      print information about the benchmark(s), including brief description, urls,
copyright and version
      </td>
    </tr>
    <tr>
      <td class="flag">-scratch&nbsp;<i>scratch-dir</i></tt> </td>
      <td class="desc">
      Specify a scratch directory for temporary output files.  If it exists, the harness
will delete and re-create it.  Defaults to "./scratch".
      </td>
    </tr>

    <tr><td class="section" colspan=2>Measurement methodology options</td></tr>
    <tr>
    <td class="flag">-converge </td>
      <td class="desc">Allow benchmark times to converge before timing.  This
        option calculates a running coefficient of variation over the last <i>k</i> runs
        of the benchmark, and when this drops below a threshold, the following iteration
        is timed.  The following flags control the convergence process:
        <table>
          <tr>
            <td class="flag">-max_iterations&nbsp;<i>n</i></td>
            <td class="desc"> Run a max of <i>n</i> iterations (default 20)</td>
          </tr>
          <tr>
            <td class="flag">-variance&nbsp;<i>pct</i></td>
            <td class="desc"> Target coefficient of variation (default 3.0)</td>
          </tr>
          <tr>
            <td class="flag">-window&nbsp;<i>n</i></td>
            <td class="desc"> Measure variance over <i>n</i> runs (default 3)</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td class="flag">-n&nbsp;<i>num</i> </td>
      <td class="desc">
      Number of iterations.  The first (n-1) are warmup iterations, 
and the last one is timed.
      </td>
    </tr>
  <tr><td class="section" colspan=2>Debugging options</td></tr>
    <tr>
      <td class="flag">-debug</td>
      <td class="desc">
      debugging output (probably only of interest to maintainers)
      </td>
    </tr>
    <tr>
      <td class="flag">-noDigestOutput</td>
      <td class="desc"> Disable digest validation of standard output and error streams.  </td>
    </tr>
    <tr>
      <td class="flag">-preserve</td>
      <td class="desc">
      preserve output files (probably only of interest to maintainers)
      </td>
    </tr>
    <tr>
      <td class="flag">-v</td>
      <td class="desc">
      verbose output (probably only of interest to maintainers)
      </td>
    </tr>
  </tbody>
</table>
<br>

<h3>Callbacks</h3> 

The harness allows for pluggable callbacks which are executed before
and after benchmark execution.  These allow (for example) JVM-specific
statistics collection to be started and stopped.<p>

<a href="MyCallback.java">Here</a> is an example benchmark callback
class.<p>

<b>Note:</b> To allow java to find your callback class, you will need to
avoid using <span style="font-family: monospace;">-jar</span>, which
overrides the classpath. So instead of:<br> <span style="font-family:
monospace;">"java <b>-jar dacapo.jar</b> [remaining args]"</span>,<br>use:<br><span
style="font-family: monospace;">"java <b>-classpath .:./dacapo.jar
Harness -c MyCallback</b> [remaining args]"</span><br> (you should replace  <span style="font-family:
monospace;">"."</span> with whichever directory contains your callback class).<p>

The distributed jar file contains one pre-built callback,
<bf>MMTkCallback</bf>, which brackets the timing run with calls to
MMTk's benchmark harness.  <br> 

</body></html>
