<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <link rel="stylesheet" type="text/css" href="gcbm.css"/>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>The DaCapo Benchmark Suite</title>
</head>

<body>
<h2>Running benchmarks</h2>
To run one of the benchmarks, use the command
<pre>java -jar dacapo-beta&lt;date&gt;.jar [-s small|default|large] [-c &lt;callbackclass&gt;] [-<flags>] &lt;bm&gt; [&lt;bm2&gt;, ...]</pre>
<pre><br>where:</pre>
<table cellpadding="2" cellspacing="2" border="0" style="text-align: left; width: 100%;">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-s</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>specifies the workload size (small, default, large)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-c</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>specifies the name of a callback class which extends dacapo.Callback, 
allowing hooks for benchmark start, end, warmup start, and warm up end</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-h</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>prints a usage message</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-n &lt;num></pre>
      </td>
      <td style="vertical-align: top;">
      <pre>Number of iterations.  The first (n-1) are warmup iterations, 
and the last one is timed.</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-two</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>Synonym for '-n 2', provided for backward compatibility.</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-i</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>print information on the benchmark(s), including brief description, urls,
copyright and version</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-scratch scratch-dir</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>Specify a scratch directory for temporary output files.  If it exists, the harness
will delete and re-create it.</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-debug</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>debugging output (probably only of interest to maintainers)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-noDigestOutput</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>Disable digest validation of standard output and error streams.</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-preserve</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>preserve output files (probably only of interest to maintainers)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>-v</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>verbose output (probably only of interest to maintainers)</pre>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <pre><b>&lt;bm&gt;</pre>
      </td>
      <td style="vertical-align: top;">
      <pre>a list of benchmarks to execute {antlr, batik, bloat, chart, fop, hsqldb, jython, 
lucene-search, lucene-index, pmd, ps, xalan}</pre>
      </td>
    </tr>
  </tbody>
</table>
<pre><br></pre>
Several of the benchmarks create output files, which they do by
creating a new subdirectory in the current working directory called
'scratch'.  The jython benchmark creates a subdirectory called 'cachedir'.
It is therefore necessary to run the benchmarks in a directory that is
writeable by the current user.

<h3>Callbacks</h3>
The harness allows for pluggable callbacks which are executed before and after
benchmark execution.  These allow (for example) JVM-specific statistics collection
to be started and stopped.
<a href="gcbm/MyCallback.java">Here</a>
is an example benchmark callback
class (use<span style="font-family: monospace;"> "-c MyCallback"</span>
on the commandline).  The distributed jar file contains one pre-built
callback
<ul>
<li><bf>MMTkCallback</bf>.  Brackets the timing run with calls to MMTk's
  benchmark harness.</li>
</ul><br>
</body></html>
