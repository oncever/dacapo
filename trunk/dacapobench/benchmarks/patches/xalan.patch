diff -r -N -w -u -I '[$]Id:' --exclude='*.class' --exclude='.*' --exclude='*.orig' --exclude='*.rej' --exclude=CVS --exclude='#*' xalan.orig/dacapo/XalanHarness.java xalan/dacapo/XalanHarness.java
--- xalan.orig/dacapo/XalanHarness.java	1970-01-01 10:00:00.000000000 +1000
+++ xalan/dacapo/XalanHarness.java	2005-09-28 15:26:21.000000000 +1000
@@ -0,0 +1,43 @@
+package dacapo;
+
+import java.io.*;
+import java.net.URL;
+
+public class XalanHarness{
+  public static void main(String[] harnessArgs) throws Exception{
+    int nRuns = Integer.parseInt(harnessArgs[0]);
+    String workingDir = new File(".").getAbsolutePath();
+    if(workingDir.endsWith("/."))
+      workingDir = workingDir.substring(0, workingDir.length()-"/.".length());
+    int iWorkload = Integer.parseInt(harnessArgs[1]);
+    URL in=null, xsl=null;
+    ClassLoader cl = XalanHarness.class.getClassLoader();
+    //    System.out.println("Getting resources");
+    if(iWorkload == 1){
+      in = cl.getResource("dat/xalan/xslbenchdream.xml");
+      xsl = cl.getResource("dat/xalan/xslbench3.xsl");
+    } else if(iWorkload == 2){
+      in = cl.getResource("dat/xalan/william.xml");
+      xsl = cl.getResource("dat/xalan/william.xsl");
+    }
+    //    System.out.println("Got them");
+    String[] cmdArgs = new String[7];
+    cmdArgs[0] = "-IN";
+    //    cmdArgs[1] = in.getAbsolutePath();
+    cmdArgs[1] = in.toString();
+    cmdArgs[2] = "-XSL";
+    //    cmdArgs[3] = xsl.getAbsolutePath();
+    cmdArgs[3] = xsl.toString();
+    cmdArgs[4] = "-OUT";
+    cmdArgs[5] = "scratch/xalan.out";
+    cmdArgs[6] = "-EDUMP";
+    for(int iRun=0; iRun<nRuns; iRun++){
+      long before = System.currentTimeMillis();
+      org.apache.xalan.xslt.Process.main(cmdArgs);
+      System.out.println("Run " + iRun + " completed, " 
+			 + (System.currentTimeMillis() - before) + " ms");
+    }
+    System.out.println("Normal completion.");
+    System.out.println("Normal completion."+in.toString());
+  }
+}
