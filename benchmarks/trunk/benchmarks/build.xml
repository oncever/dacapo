<!--
 * Ant build file for the DaCapo benchmark suite.
 *       
 * Public targets are 
 * - dist (default) compile from source and create the dacapo jar file. 
 * External tools required (apart from a JDK and Ant)
 *   - make
 *   - javacc, assumed to be on the path, with library files in 
 *     /usr/share/javacc/lib
-->

<project name="DacapoBenchmarks" default="dist" basedir=".">
    <description>Dacapo benchmarks</description>

	<property file="ant/local.properties"/>
	<property file="ant/default.properties"/>
 	<property file="ant/dacapo.properties"/>

    <!-- BEGIN PUBLIC TARGETS -->

    <!-- ================================= 
         target: dist              
         ================================= -->
    <target name="dist" depends="harness,compile">
    	<move file="dacapo.jar" tofile="dacapo-${DSTAMP}.jar"/>
   	</target>


    <!-- constraints -->
    <property name="constraints.gnuclasspath" value="true"/>

    <!-- auxilary downloads -->
    <!-- data downloads -->
    <property name="shakespeare.xml.url" value="http://metalab.unc.edu/bosak/xml/eg/shaks200.zip"/>


    <target name="init">
        <!-- Create the time stamp -->
        <tstamp/>
    </target>

    <!-- ================================= 
         target: compile  all sources
         ================================= -->
    <target name="compile" depends="antlr,batik,bloat,derby,eclipse,fop,hsqldb,jython,luindex,lusearch,pmd,sunflow,xalan"/>

    <!-- ================================= 
         target: harness           
         ================================= -->
    <target name="harness" depends="init" description="compile the source ">
		<ant antfile="harness/build.xml"/>
    </target>

    <!-- *************************************************************************** -->
    <!--                            Build                                            -->
    <!-- *************************************************************************** -->

    <!-- ================================= 
        target: antlr 
       ================================= -->
    <target name="antlr" depends="init,harness" description="--> build the antlr benchmark">
    	<ant antfile="antlr/build.xml" target="incremental" inheritAll="true"/>
    </target>
	
    <!-- ================================= 
        target: batik 
       ================================= -->
    <target name="batik" depends="init,harness" description="Build batik">
    	<ant antfile="batik/build.xml" target="incremental" inheritAll="true"/>
    </target>

    <!-- ================================= 
         target: bloat 
         ================================= -->
    <target name="bloat" depends="init,harness" description="Build bloat">
    	<ant antfile="bloat/build.xml" target="incremental" inheritAll="true"/>
    </target>


    <!-- ================================= 
          target: chart              
         ================================= -->
    <target name="chart" depends="init,harness" description="--> build the jFreeChart benchmark">
    	<ant antfile="chart/build.xml" target="incremental" inheritAll="true"/>
    </target>	

	
    <!-- ================================= 
          target: derby              
         ================================= -->
    <target name="derby" depends="init,harness" description="--> build the derby benchmark">
    	<ant antfile="derby/build.xml" target="incremental" inheritAll="true"/>
	</target>	


    <!-- ================================= 
          target: eclipse              
         ================================= -->
    <target name="eclipse" depends="init,harness" description="--> build the eclipse benchmark">
    	<ant antfile="eclipse/build.xml" target="incremental" inheritAll="true"/>
	</target>	

    <!-- ================================= 
        target: fop 
       ================================= -->
    <target name="fop" depends="init,harness" description="--> build the fop benchmark">
    	<ant antfile="fop/build.xml" target="incremental" inheritAll="true"/>
    </target>
	
    <!-- ================================= 
          target: hsqldb              
       ================================= -->
    <target name="hsqldb" depends="init,harness" description="--> build the hsqldb benchmark">
    	<ant antfile="hsqldb/build.xml" target="incremental" inheritAll="true"/>
	</target>	

    <!-- ================================= 
          target: jython                
         ================================= -->
    <target name="jython" depends="init,harness" description="--> build the jython benchmark">
		<ant antfile="jython/build.xml" target="incremental" inheritAll="true"/>
	</target>

    <!-- ================================= 
          target: luindex    
         ================================= -->
    <target name="luindex" depends="init,harness">
		<ant antfile="luindex/build.xml" target="incremental"/>
	</target>

    <!-- ================================= 
          target: lusearch   
         ================================= -->
    <target name="lusearch" depends="init,harness">
		<ant antfile="lusearch/build.xml" target="incremental"/>
	</target>

    <!-- ================================= 
          target: pmd    
         ================================= -->
    <target name="pmd" depends="init,harness" description="--> build the pmd benchmark">
		<ant antfile="pmd/build.xml" target="incremental"/>
    </target>

    <!-- ================================= 
          target: sunflow  
         ================================= -->
    <target name="sunflow" depends="init,harness" description="--> build the sunflow benchmark">
		<ant antfile="sunflow/build.xml" target="incremental"/>
    </target>

    <!-- ================================= 
        target: xalan
       ================================= -->
    <target name="xalan" depends="init,harness" description="--> build the xalan benchmark">
		<ant antfile="xalan/build.xml" target="incremental"/>
    </target>	
</project>
