<!--
 * Ant build file for the DaCapo benchmark suite.
 *       
 * Public targets are 
 * - dist (default) compile from source and create the dacapo jar file. 
 * External tools required (apart from a JDK and Ant)
 *   - make
 *   - javacc, assumed to be on the path, with library files in 
 *     /usr/share/javacc/lib
-->

<project name="DacapoBenchmarks" default="dist" basedir=".">
    <description>Dacapo benchmarks</description>

	<property file="local.properties"/>
	<property file="default.properties"/>
 	<property file="dacapo.properties"/>

    <!-- BEGIN PUBLIC TARGETS -->

    <!-- ================================= 
         target: dist              
         ================================= -->
    <target name="dist" depends="harness,compile">
    	<move file="dacapo.jar" tofile="dacapo-${DSTAMP}.jar"/>
   	</target>

    <target name="init">
        <!-- Create the time stamp -->
        <tstamp/>
    </target>

    <!-- ================================= 
         target: compile  all sources
         ================================= -->
    <target name="compile" depends="antlr,batik,bloat,derby,eclipse,fop,hsqldb,jython,luindex,lusearch,pmd,sunflow,xalan"/>

    <!-- ================================= 
         target: harness           
         ================================= -->
    <target name="harness" depends="init" description="compile the source ">
		<ant antfile="harness/build.xml"/>
    </target>

    <!-- *************************************************************************** -->
    <!--                            Build                                            -->
    <!-- *************************************************************************** -->

    <target name="antlr" depends="init,harness">
    	<ant antfile="bms/antlr/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="batik" depends="init,harness">
    	<ant antfile="bms/batik/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="bloat" depends="init,harness">
    	<ant antfile="bms/bloat/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="chart" depends="init,harness">
    	<ant antfile="bms/chart/build.xml" target="incremental" inheritAll="true"/>
    </target>	
    <target name="derby" depends="init,harness">
    	<ant antfile="bms/derby/build.xml" target="incremental" inheritAll="true"/>
	</target>	
    <target name="eclipse" depends="init,harness">
    	<ant antfile="bms/eclipse/build.xml" target="incremental" inheritAll="true"/>
	</target>	
    <target name="fop" depends="init,harness">
    	<ant antfile="bms/fop/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="hsqldb" depends="init,harness">
    	<ant antfile="bms/hsqldb/build.xml" target="incremental" inheritAll="true"/>
	</target>
    <target name="jython" depends="init,harness">
		<ant antfile="bms/jython/build.xml" target="incremental" inheritAll="true"/>
	</target>
    <target name="luindex" depends="init,harness">
		<ant antfile="bms/luindex/build.xml" target="incremental"/>
	</target>
    <target name="lusearch" depends="init,harness">
		<ant antfile="bms/lusearch/build.xml" target="incremental"/>
	</target>
    <target name="pmd" depends="init,harness" description="--> build the pmd benchmark">
		<ant antfile="bms/pmd/build.xml" target="incremental"/>
    </target>
    <target name="sunflow" depends="init,harness" description="--> build the sunflow benchmark">
		<ant antfile="bms/sunflow/build.xml" target="incremental"/>
    </target>
    <target name="xalan" depends="init,harness" description="--> build the xalan benchmark">
		<ant antfile="bms/xalan/build.xml" target="incremental"/>
    </target>	
</project>
