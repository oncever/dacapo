<project name="DacapoBenchmarks" default="dist" basedir=".">
	<property name="toolsdir" location="../tools"/>
	<description>
			The DaCapo Benchmark Suite

DEPENDENCIES:
		
   - javacc (http://javacc.dev.java.net/)
   - maven  (http://maven.apache.org/)
		
For convinience, both are included in the tools directory:
	${toolsdir}

		
BUILDING:
			
	1. Set your JAVA_HOME environment variable appropriately:
		On Mac OS X:
			export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home			
		On Ubuntu 9.04:
			export JAVA_HOME=/usr/lib/jvm/java-6-sun
			
	2. Copy default.properties to local.properties and edit local.properties
	   for your environment.
			   
	3. Ensure maven (mvn) is in your execution path.  You may use
	   the version that we include in our tools directory if you wish.
	   On unix/MacOS X:
			export PATH=${toolsdir}/apache-maven-2.1.0/bin:$PATH   
	   We have had some problems with older versions of maven.
			
	4. Run ant:
	   		ant     	[builds all benchmarks]
	   		ant bm  	[builds a specific benchmark, bm]
</description>
	
	<property file="local.properties"/>
	<property file="default.properties"/>
 	<property file="dacapo.properties"/>

    <!-- BEGIN PUBLIC TARGETS -->

    <!-- ================================= 
         target: dist              
         ================================= -->
    <target name="dist" depends="harness,compile">
    	<move file="dacapo.jar" tofile="dacapo-${DSTAMP}.jar"/>
   	</target>

    <target name="init">
        <!-- Create the time stamp -->
        <tstamp/>
    </target>

    <!-- ================================= 
         target: compile  all sources
         ================================= -->
    <target name="compile" depends="avrora,batik,derby,eclipse,fop,jython,luindex,lusearch,pmd,sunflow,tomcat,xalan"/>

    <!-- ================================= 
         target: harness           
         ================================= -->
    <target name="harness" depends="init" description="compile the source ">
		<ant antfile="harness/build.xml"/>
    </target>

    <!-- *************************************************************************** -->
    <!--                            Build                                            -->
    <!-- *************************************************************************** -->


    <target name="avrora" depends="init,harness">
    	<ant antfile="bms/avrora/build.xml" target="incremental" inheritAll="true"/>
    </target>
	<target name="batik" depends="init,harness">
    	<ant antfile="bms/batik/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="derby" depends="init,harness">
    	<ant antfile="bms/derby/build.xml" target="incremental" inheritAll="true"/>
	</target>	
    <target name="eclipse" depends="init,harness">
    	<ant antfile="bms/eclipse/build.xml" target="incremental" inheritAll="true"/>
	</target>	
    <target name="fop" depends="init,harness">
    	<ant antfile="bms/fop/build.xml" target="incremental" inheritAll="true"/>
    </target>
    <target name="jython" depends="init,harness">
		<ant antfile="bms/jython/build.xml" target="incremental" inheritAll="true"/>
	</target>
    <target name="luindex" depends="init,harness">
		<ant antfile="bms/luindex/build.xml" target="incremental"/>
	</target>
    <target name="lusearch" depends="init,harness">
		<ant antfile="bms/lusearch/build.xml" target="incremental"/>
	</target>
    <target name="pmd" depends="init,harness">
		<ant antfile="bms/pmd/build.xml" target="incremental"/>
    </target>
    <target name="sunflow" depends="init,harness">
		<ant antfile="bms/sunflow/build.xml" target="incremental"/>
    </target>
    <target name="tomcat" depends="init,harness">
		<ant antfile="bms/tomcat/build.xml" target="incremental"/>
    </target>
    <target name="tradebeans" depends="init,harness">
		<ant antfile="bms/tradebeans/build.xml" target="incremental"/>
    </target>
    <target name="tradesoap" depends="init,harness">
		<ant antfile="bms/tradesoap/build.xml" target="incremental"/>
    </target>
	<target name="xalan" depends="init,harness">
		<ant antfile="bms/xalan/build.xml" target="incremental"/>
    </target>	
</project>
