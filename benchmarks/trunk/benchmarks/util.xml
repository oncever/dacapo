<project name="util">
	
	<target name="check-source" if="target-file">
		<!--	 	<checksum file="${target-dir}/${target-file}"/> -->
		<condition property="up-to-date">
			<and>
				<available file="${target-dir}/${target-file}"/>
				<checksum file="${target-dir}/${target-file}"/>
			</and>
		</condition>
		<antcall target="get-source">
			<param name="target-dir" value="${target-dir}"/>
			<param name="target-url" value="${target-url}"/>
			<param name="target-file" value="${target-file}"/>
		</antcall>	
	</target>
	
	<target name="get-source" unless="up-to-date">
        <get src="${target-url}/${target-file}" dest="${target-dir}/${target-file}" usetimestamp="true"/>
	</target>
	
	<target name="check-svn-source" if="target-file">
		<!--	 	<checksum file="${target-dir}/${target-file}"/> -->
		<condition property="svn-up-to-date">
			<and>
				<available file="${target-dir}/${target-file}"/>
				<checksum file="${target-dir}/${target-file}"/>
			</and>
		</condition>
		<antcall target="get-svn-source">
			<param name="target-dir" value="${target-dir}"/>
			<param name="svn-url" value="${svn-url}"/>
			<param name="svn-revision" value="${svn-revison}"/>
			<param name="target-file" value="${target-file}"/>
		</antcall>	
	</target>
	
	<target name="get-svn-source" unless="svn-up-to-date">
		<property name="svn-tmp" value="svn-tmp"/>
        <exec executable="svn" failonerror="false">
            <arg line="-r${svn-revision}"/>
            <arg line="checkout"/>
            <arg line="${svn-url}"/>
            <arg line="${svn-tmp}"/>
        </exec>
		<tar destfile="${target-dir}/${target-file}" basedir="${svn-tmp}" compression="gzip"/>
        <delete dir="${svn-tmp}"/>
	</target>
	
	
</project>