<project name="xerces" default="library" basedir="..">
    <description>xerces library, required by xalan</description>
	<property file="ant/dacapo.properties"/>
	
	<property name="lib-name" value="xerces"/>
    <property name="lib-version" value="2.8.0"/>
    <property name="lib-_version" value="2_8_0"/>
    <property name="lib-url" value="${apache.dl.url}/xml/xerces-j/binaries"/>
	<property name="lib-src" value="Xerces-J-bin.${lib-version}.tar.gz"/>

	<import file="../lib-common.xml"/>
	
    <property name="lib-build-top" value="${lib-build-dir}/${lib-name}-${lib-_version}"/>
	<property name="xerces-impl-jar-name" value="xercesImpl.jar"/>
	<property name="xerces-api-jar-name" value="xml-apis.jar"/>
	
	<target name="library" depends="lib-untar, lib-build, lib-jar"/>
	
	<target name="lib-build">
        <condition property="xerces-jar" value="${lib-build-top}/xerces.jar" else="${lib-build-top}/xercesImpl.jar">
            <contains string="${lib-version}" substring="1.4.4"/>
        </condition>
        <condition property="xercesxml-jar" value="${lib-build-top}/xmlParserAPIs.jar" else="${lib-build-top}/xml-apis.jar">
            <contains string="${lib-version}" substring="2.2.1"/>
        </condition>
	</target>
		
 	<target name="lib-jar" depends="lib-deps">
    	<copy file="${xerces-jar}" tofile="${jars}/${xerces-impl-jar-name}"/>
    	<copy file="${xercesxml-jar}" tofile="${jars}/${xerces-api-jar-name}"/>
	</target>
 		
    <target name="lib-deps" if="externalize.deps">
        <copy src="${xerces-jar}" tofile="${build}/${xerces-impl-jar-name}"/>
        <copy src="${xercesxml-jar}" tofile="${build}/${xerces-api-jar-name}"/>
    </target>
	
	<target name="xerces-done-check">
		<condition property="xerces-build-done">
			<and>
				<available file="${build}/${xerces-impl-jar-name}"/>
				<available file="${build}/${xerces-api-jar-name}"/>
			</and>
		</condition>
	</target>

</project>