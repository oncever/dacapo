--- xalan.orig/xalan-j_2_4_1/build.xml	2007-01-17 14:35:08.000000000 +1100
+++ xalan/xalan-j_2_4_1/build.xml	2007-01-17 14:35:16.000000000 +1100
@@ -182,6 +182,7 @@
          compatibility with 1.1.x.  If you omit this property, compatability
          with 1.1.x will not be checked even though javac specifies a target of 1.1 -->
     <pathelement location="${build.classes}" />
+    <pathelement location="${xmlapis.jar}"/>
     <pathelement path="${build.boot.class.path}" />
     <pathelement path="${sun.boot.class.path}" />
   </path>
@@ -240,6 +241,8 @@
     <javac srcdir="${src.dir}" 
            destdir="${build.classes}"
            debug="${build.debug}"
+           listfiles="yes"
+           source="1.3"
            target="1.1" >
       <include name="${apachexml.reldir}/**/*.java" />
       <!-- But exclude unused synthetic* files; should be obsoleted from CVS -->
@@ -288,6 +291,8 @@
     <javac srcdir="${src.dir}" 
            destdir="${build.classes}"
            includes="${xsltc.reldir}/util/**/*.java"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}">
       <classpath refid="xsltc.class.path" />
       <bootclasspath refid="xslt.boot.class.path" />
@@ -345,6 +350,8 @@
     <javac srcdir="${src.dir}" 
            destdir="${build.classes}"
            includes="${xsltc.reldir}/**/*.java"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}">
       <classpath refid="xsltc.class.path" />
       <bootclasspath refid="xslt.boot.class.path" />
@@ -357,6 +364,8 @@
     <javac srcdir="${src.dir}" 
            destdir="${build.classes}"
            includes="${xsltc.reldir}/**/*.java"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}">
       <classpath refid="xsltc.class.path" />
       <bootclasspath refid="xslt.boot.class.path" />
@@ -506,6 +515,8 @@
            destdir="${build.compat.classes}"
            includes="**/*.java"
            debug="${build.debug}"
+           source="1.3"
+           target="1.1"
            bootclasspathref="xslt.boot.class.path" >
       <classpath refid="docs.class.path" />
     </javac>           
@@ -549,61 +560,85 @@
     <!-- Since the samples are packageless, they must be compiled separately. -->   
     <javac srcdir="${samples.dir}/SimpleTransform" 
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/UseStylesheetPI"   
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/UseStylesheetParam" 
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/SAX2SAX"  
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/DOM2DOM"  
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/Pipe"  
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/UseXMLFilters"  
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/Trace"   
            destdir="${build.samples}"  excludes="${exclude}"
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/ApplyXPath"  
            destdir="${build.samples}" excludes="${exclude}" 
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/trax"  
            destdir="${build.samples}" excludes="${exclude}" 
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/extensions"  
            destdir="${build.samples}" excludes="${exclude}" 
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
     <javac srcdir="${samples.dir}/Validate"  
            destdir="${build.samples}" excludes="${exclude}" 
+           source="1.3"
+           target="1.1"
            debug="${build.debug}" bootclasspathref="xslt.boot.class.path" >
       <classpath refid="samples.class.path" />
     </javac>           
@@ -623,6 +658,8 @@
      <javac srcdir="${samples.dir}/servlet"
             destdir="${build.samples}"
             debug="${build.debug}"
+           source="1.3"
+           target="1.1"
             bootclasspathref="xslt.boot.class.path" >
        <classpath refid="samples.class.path" />
      </javac>           
@@ -648,6 +685,8 @@
     <javac srcdir="${samples.dir}/translets" classpath="${java.class.path}:${build.xsltc.jar}" 
            destdir="${samples.dir}/translets" excludes="${exclude}" 
            debug="${build.debug}"
+           source="1.3"
+           target="1.1"
            bootclasspathref="xslt.boot.class.path" />
   </target>
  
diff -N -u -r xalan.orig/xalan-j_2_4_1/src/org/apache/xalan/serialize/Encodings.java xalan/xalan-j_2_4_1/src/org/apache/xalan/serialize/Encodings.java
--- xalan.orig/xalan-j_2_4_1/src/org/apache/xalan/serialize/Encodings.java	2006-10-21 07:25:15.000000000 +1000
+++ xalan/xalan-j_2_4_1/src/org/apache/xalan/serialize/Encodings.java	2006-10-21 07:25:49.000000000 +1000
@@ -149,7 +149,7 @@
    */
   public static Object getCharToByteConverter(String encoding)
   {
-
+    /*
     Class charToByteConverterClass = null;
     java.lang.reflect.Method getConverterMethod = null;
 
@@ -184,7 +184,7 @@
         }
       }
     }
-
+    */
     return null;
   }
 
